---
[comment]: <> (title "Weissensee results exploration 2014-2016")
[comment2]: <> (author "Ger Inberg")
[comment3]: <> (date "20-01-2016")
output: html_document
---

# Weissensee results exploration 2014-2016

## Introduction
One of my hobbies is ice-skating and in 2015 I have done the "Alternatieve Elfstedentocht" for the first time. It is an ice skating event held in Austria, over a distance of 200km ([video](https://www.youtube.com/watch?v=FhdifsMYr8s)). In a period of about 10 days multiple events are held, for professionals as well as for amateurs. 

Most participants are from the Netherlands, they are so unfortunate that there is not enough ice on their lakes to organise such an event. Because I was interested in how many people finished the 200km and what the average finish time was, I have done some data analysis.
First I have scraped the data from the Weissensee website to a [csv file](data/weissensee_results.csv), with a [python script](weissensee_scraper.py). Notice: these results are only from the 3 amateur races that are held in the 10-day period.

[comment4]: <> (<iframe width="560" height="315" src="http://youtube.com/embed/FhdifsMYr8s"; frameborder="0" allowfullscreen></iframe>)

```{r echo=FALSE, message=FALSE, warning=FALSE, packages}
# Load all of the packages that I need.

# Notice that the parameter "echo" was set to FALSE for this code chunk.
# This prevents the code from displaying in the knitted HTML output.

library(ggplot2)
```

## Dataset info
```{r echo=FALSE, message=FALSE, warning=FALSE, Load_the_Data}
# Load the Data, combine the two datasets and print some basics
weissensee <-read.csv("data/weissensee_results.csv", header=TRUE, sep = ";") 
str(weissensee)
# add year variable for ease of use
weissensee$Year = as.numeric(format(as.POSIXct(weissensee$Date, format='%d-%m-%Y'), format="%Y"))
```

## Univariate Plots Section
```{r echo=FALSE, message=FALSE, warning=FALSE, Univariate_Plots}
#plot histograms of interesting features
#finish time 200km
weissensee200km <- weissensee[as.numeric(as.matrix(weissensee$Distance)) == 200.0, ]
weissensee200km$TimeFormatted  <- as.POSIXct(strptime(weissensee200km$Time, format="%H:%M:%S"))
weissensee200km$Year = as.numeric(format(as.POSIXct(weissensee200km$Date, format='%d-%m-%Y'), format="%Y"))
ggplot(data = weissensee200km, aes(x=TimeFormatted)) + geom_histogram() + 
  ggtitle("Distribution of finish times (200km)") + xlab('Time (hours)') + 
  ylab('count')
#summary(weissensee200km$Time)

#country
ggplot(data = weissensee, aes(x=Country)) + geom_histogram() + 
  scale_y_log10() + ggtitle("Country of residence of participants") + 
  xlab('Country') + ylab('count (log scale)')
summary(weissensee$Country) 

#Distance
ggplot(data = weissensee, aes(x=Distance)) + geom_histogram() +
  scale_y_sqrt() + ggtitle("Distribution of covered distance") + 
  xlab('Distance') + ylab('count (sqrt scale)')
summary(weissensee$Distance)
```

## Bivariate Plots Section
```{r echo=FALSE, message=FALSE, warning=FALSE, Bivariate_Plots}
# finish times per year
ggplot(data = weissensee200km, aes(x=factor(Year), y=TimeFormatted)) + 
  geom_jitter(alpha=0.1) + geom_boxplot(alpha=0.1) + 
  ggtitle("Finish time (200km) per year") + xlab('Year') + ylab('Time (hours)')
```


## Weissensee triple 2015

Some participants just can't get enough of ice-skating and are participating multiple times in the event. The event is held 3 times in a period of 10 days and I want to know how many people finished 3 times in the full distance and if there is a relation between their finish times.

```{r echo=FALSE, message=FALSE, warning=FALSE, Triple}
weissensee_triple <- c()
weissensee2015 <- weissensee[weissensee$Year == 2015, ]
weissensee2015_200k <- weissensee2015[as.numeric(as.matrix(weissensee2015$Distance)) == 200.0, ]
names <- unique(weissensee2015_200k$Name)
for(i in 1:length(names)){
  name = names[i]
  temp <- weissensee2015_200k[weissensee2015_200k$Name == name, ]
  if(nrow(temp) == 3){
    weissensee_triple <- rbind(weissensee_triple, temp)
  }
}
#length(unique(weissensee_triple$Name))
ggplot(data = weissensee_triple, aes(x=factor(EventId), y=Time, color=Name)) + 
  geom_point() + geom_line(aes(group=Name)) + scale_x_discrete(labels=c("23-1-15","27-1-15","30-1-15")) + 
  xlab('Date') + ylab('Finish time')
```

So, there were 6 brave man that finished 3 times! Unfortunately, it is hard to see a trend in finish times for these individuals. Some had their fastest time in the first event, some in the second and only one in the last event. Of course, the finish time depends on a lot of factors, including the individuals capabilities, weather conditions, etc.

## Ideas for future work
* relate the finish times to weather conditions (wind, snow conditions, temperature)
* compare the year 2015 to results of other years and look for trends

